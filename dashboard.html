<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ContentFlow - Agent Dashboard</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .slider {
            -webkit-appearance: none;
            appearance: none;
            background: #e5e7eb;
            outline: none;
            height: 8px;
            border-radius: 4px;
            transition: background 0.2s;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: white;
            border: 2px solid #3b82f6;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .toggle {
            appearance: none;
            width: 44px;
            height: 24px;
            background: #e5e7eb;
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: background 0.2s;
        }
        .toggle:checked {
            background: #3b82f6;
        }
        .toggle::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: transform 0.2s;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .toggle:checked::after {
            transform: translateX(20px);
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icons
        const Settings = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="3"></circle><path d="M12 1v6m0 6v6m9-9h-6m-6 0H3m20.1-6.9L19.07 4.93M19.07 19.07L20.1 20.1M3.9 20.1l1.07-1.07M4.93 4.93L3.9 3.9"></path></svg>;
        const Save = () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>;
        const Play = () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>;
        const Check = () => <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="20 6 9 17 4 12"></polyline></svg>;
        const ChevronDown = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="6 9 12 15 18 9"></polyline></svg>;
        const Search = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg>;
        const FileText = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>;
        const Mail = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="2" y="4" width="20" height="16" rx="2"></rect><path d="m22 7-10 5L2 7"></path></svg>;

        const AgentDashboard = () => {
            const [selectedAgent, setSelectedAgent] = useState('research');
            const [expandedSections, setExpandedSections] = useState({ guardrails: false });
            const [saving, setSaving] = useState(false);
            const [agentConfigs, setAgentConfigs] = useState({
                research: {
                    model: 'gpt-3.5-turbo',
                    temperature: 0.3,
                    maxTokens: 1000,
                    systemPrompt: 'You are a research specialist. Be factual and thorough.',
                    tools: ['webSearch', 'wikipedia'],
                    outputFormat: 'bulletPoints',
                    requireSources: true,
                    factChecking: true,
                    timeout: 30,
                    maxRetries: 3
                },
                writer: {
                    model: 'gpt-4-turbo-preview',
                    temperature: 0.7,
                    maxTokens: 2000,
                    systemPrompt: 'You are a creative writer. Craft engaging, well-structured content.',
                    tools: ['grammarCheck'],
                    outputFormat: 'paragraph',
                    requireSources: false,
                    factChecking: false,
                    timeout: 45,
                    maxRetries: 2
                },
                newsletter: {
                    model: 'gpt-3.5-turbo',
                    temperature: 0.5,
                    maxTokens: 800,
                    systemPrompt: 'You are a newsletter specialist. Create concise, engaging summaries.',
                    tools: ['emailFormatter'],
                    outputFormat: 'markdown',
                    requireSources: false,
                    factChecking: false,
                    timeout: 20,
                    maxRetries: 2
                }
            });

            const models = [
                'gpt-3.5-turbo',
                'gpt-4',
                'gpt-4-turbo-preview',
                'claude-3-opus',
                'claude-3-sonnet'
            ];

            const availableTools = [
                { id: 'webSearch', label: 'Web Search', icon: 'ðŸ”' },
                { id: 'wikipedia', label: 'Wikipedia', icon: 'ðŸ“š' },
                { id: 'newsApi', label: 'News API', icon: 'ðŸ“°' },
                { id: 'calculator', label: 'Calculator', icon: 'ðŸ§®' },
                { id: 'grammarCheck', label: 'Grammar Check', icon: 'âœï¸' },
                { id: 'emailFormatter', label: 'Email Formatter', icon: 'ðŸ“§' }
            ];

            const outputFormats = [
                'bulletPoints',
                'paragraph',
                'json',
                'markdown'
            ];

            const agents = [
                { id: 'research', name: 'Research Agent', icon: 'ðŸ”¬' },
                { id: 'writer', name: 'Writer Agent', icon: 'âœï¸' },
                { id: 'newsletter', name: 'Newsletter Agent', icon: 'ðŸ“®' }
            ];

            const updateConfig = (agent, field, value) => {
                setAgentConfigs(prev => ({
                    ...prev,
                    [agent]: {
                        ...prev[agent],
                        [field]: value
                    }
                }));
            };

            const toggleTool = (agent, toolId) => {
                const currentTools = agentConfigs[agent].tools || [];
                const newTools = currentTools.includes(toolId)
                    ? currentTools.filter(t => t !== toolId)
                    : [...currentTools, toolId];
                updateConfig(agent, 'tools', newTools);
            };

            const toggleSection = (section) => {
                setExpandedSections(prev => ({
                    ...prev,
                    [section]: !prev[section]
                }));
            };

            const saveConfiguration = async () => {
                setSaving(true);
                try {
                    // TODO: Implement actual save to backend
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    alert('Configuration saved successfully!');
                } catch (error) {
                    alert('Failed to save configuration');
                } finally {
                    setSaving(false);
                }
            };

            const config = agentConfigs[selectedAgent];

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Header */}
                    <div className="bg-white border-b border-gray-100">
                        <div className="max-w-7xl mx-auto px-6 py-4">
                            <div className="flex items-center justify-between">
                                <h1 className="text-2xl font-light text-gray-900">Agent Configuration</h1>
                                <div className="flex items-center gap-3">
                                    <a href="/ui" className="px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors flex items-center gap-2">
                                        <Play />
                                        <span className="text-sm">Run Workflow</span>
                                    </a>
                                    <button 
                                        onClick={saveConfiguration}
                                        disabled={saving}
                                        className="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2 disabled:opacity-50"
                                    >
                                        <Save />
                                        <span className="text-sm font-medium">{saving ? 'Saving...' : 'Save'}</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-7xl mx-auto px-6 py-8">
                        <div className="grid grid-cols-12 gap-6">
                            {/* Agent Selector */}
                            <div className="col-span-3">
                                <div className="bg-white rounded-xl p-4 shadow-sm">
                                    <h2 className="text-sm font-medium text-gray-500 mb-4">AGENTS</h2>
                                    <div className="space-y-2">
                                        {agents.map(agent => (
                                            <button
                                                key={agent.id}
                                                onClick={() => setSelectedAgent(agent.id)}
                                                className={`w-full text-left p-3 rounded-lg transition-all ${
                                                    selectedAgent === agent.id
                                                        ? 'bg-blue-50 text-blue-600'
                                                        : 'hover:bg-gray-50'
                                                }`}
                                            >
                                                <div className="flex items-center gap-3">
                                                    <span className="text-xl">{agent.icon}</span>
                                                    <span className={`text-sm ${
                                                        selectedAgent === agent.id ? 'font-medium' : ''
                                                    }`}>
                                                        {agent.name}
                                                    </span>
                                                </div>
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Configuration Panel */}
                            <div className="col-span-9">
                                <div className="bg-white rounded-xl shadow-sm">
                                    {/* Agent Header */}
                                    <div className="p-6 border-b border-gray-100">
                                        <div className="flex items-center gap-3">
                                            <span className="text-2xl">
                                                {agents.find(a => a.id === selectedAgent)?.icon}
                                            </span>
                                            <h2 className="text-xl font-light">
                                                {agents.find(a => a.id === selectedAgent)?.name}
                                            </h2>
                                        </div>
                                    </div>

                                    {/* Configuration Sections */}
                                    <div className="divide-y divide-gray-100">
                                        {/* Model Configuration */}
                                        <div className="p-6 space-y-6">
                                            <div className="grid grid-cols-2 gap-6">
                                                <div>
                                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                                        Model
                                                    </label>
                                                    <select
                                                        value={config.model}
                                                        onChange={(e) => updateConfig(selectedAgent, 'model', e.target.value)}
                                                        className="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                    >
                                                        {models.map(model => (
                                                            <option key={model} value={model}>{model}</option>
                                                        ))}
                                                    </select>
                                                </div>

                                                <div>
                                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                                        Output Format
                                                    </label>
                                                    <select
                                                        value={config.outputFormat}
                                                        onChange={(e) => updateConfig(selectedAgent, 'outputFormat', e.target.value)}
                                                        className="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                    >
                                                        {outputFormats.map(format => (
                                                            <option key={format} value={format}>
                                                                {format.replace(/([A-Z])/g, ' $1').trim()}
                                                            </option>
                                                        ))}
                                                    </select>
                                                </div>
                                            </div>

                                            {/* Temperature Slider */}
                                            <div>
                                                <div className="flex justify-between items-center mb-2">
                                                    <label className="text-sm font-medium text-gray-700">
                                                        Temperature
                                                    </label>
                                                    <span className="text-sm text-gray-500">{config.temperature}</span>
                                                </div>
                                                <input
                                                    type="range"
                                                    min="0"
                                                    max="1"
                                                    step="0.1"
                                                    value={config.temperature}
                                                    onChange={(e) => updateConfig(selectedAgent, 'temperature', parseFloat(e.target.value))}
                                                    className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"
                                                />
                                            </div>

                                            {/* Max Tokens */}
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                                    Max Tokens
                                                </label>
                                                <input
                                                    type="number"
                                                    value={config.maxTokens}
                                                    onChange={(e) => updateConfig(selectedAgent, 'maxTokens', parseInt(e.target.value))}
                                                    className="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                    min="100"
                                                    max="4000"
                                                />
                                            </div>
                                        </div>

                                        {/* System Prompt */}
                                        <div className="p-6">
                                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                                System Prompt
                                            </label>
                                            <textarea
                                                value={config.systemPrompt}
                                                onChange={(e) => updateConfig(selectedAgent, 'systemPrompt', e.target.value)}
                                                className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                                                rows="4"
                                            />
                                        </div>

                                        {/* Tools */}
                                        <div className="p-6">
                                            <label className="block text-sm font-medium text-gray-700 mb-4">
                                                Tools & Capabilities
                                            </label>
                                            <div className="grid grid-cols-3 gap-3">
                                                {availableTools.map(tool => (
                                                    <label
                                                        key={tool.id}
                                                        className={`flex items-center gap-3 p-3 border rounded-lg cursor-pointer transition-all ${
                                                            config.tools?.includes(tool.id)
                                                                ? 'border-blue-500 bg-blue-50'
                                                                : 'border-gray-200 hover:border-gray-300'
                                                        }`}
                                                    >
                                                        <input
                                                            type="checkbox"
                                                            checked={config.tools?.includes(tool.id) || false}
                                                            onChange={() => toggleTool(selectedAgent, tool.id)}
                                                            className="sr-only"
                                                        />
                                                        <span className="text-lg">{tool.icon}</span>
                                                        <span className="text-sm">{tool.label}</span>
                                                        {config.tools?.includes(tool.id) && (
                                                            <Check className="ml-auto text-blue-500" />
                                                        )}
                                                    </label>
                                                ))}
                                            </div>
                                        </div>

                                        {/* Guardrails */}
                                        <div className="p-6">
                                            <button
                                                onClick={() => toggleSection('guardrails')}
                                                className="flex items-center justify-between w-full text-left"
                                            >
                                                <h3 className="text-sm font-medium text-gray-700">Guardrails & Validation</h3>
                                                <div className={`transform transition-transform ${expandedSections.guardrails ? 'rotate-180' : ''}`}>
                                                    <ChevronDown />
                                                </div>
                                            </button>
                                            
                                            {expandedSections.guardrails && (
                                                <div className="mt-4 space-y-4">
                                                    <label className="flex items-center justify-between">
                                                        <span className="text-sm text-gray-600">Require Sources</span>
                                                        <input
                                                            type="checkbox"
                                                            checked={config.requireSources}
                                                            onChange={(e) => updateConfig(selectedAgent, 'requireSources', e.target.checked)}
                                                            className="toggle"
                                                        />
                                                    </label>
                                                    
                                                    <label className="flex items-center justify-between">
                                                        <span className="text-sm text-gray-600">Fact Checking</span>
                                                        <input
                                                            type="checkbox"
                                                            checked={config.factChecking}
                                                            onChange={(e) => updateConfig(selectedAgent, 'factChecking', e.target.checked)}
                                                            className="toggle"
                                                        />
                                                    </label>

                                                    <div className="grid grid-cols-2 gap-4 pt-2">
                                                        <div>
                                                            <label className="block text-sm text-gray-600 mb-1">
                                                                Timeout (seconds)
                                                            </label>
                                                            <input
                                                                type="number"
                                                                value={config.timeout}
                                                                onChange={(e) => updateConfig(selectedAgent, 'timeout', parseInt(e.target.value))}
                                                                className="w-full px-3 py-1.5 text-sm border border-gray-200 rounded-lg"
                                                            />
                                                        </div>
                                                        <div>
                                                            <label className="block text-sm text-gray-600 mb-1">
                                                                Max Retries
                                                            </label>
                                                            <input
                                                                type="number"
                                                                value={config.maxRetries}
                                                                onChange={(e) => updateConfig(selectedAgent, 'maxRetries', parseInt(e.target.value))}
                                                                className="w-full px-3 py-1.5 text-sm border border-gray-200 rounded-lg"
                                                            />
                                                        </div>
                                                    </div>
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<AgentDashboard />);
    </script>
</body>
</html>
